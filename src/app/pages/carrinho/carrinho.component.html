<div class="carrinho-page">

  <header class="cart-header">
    <div class="header-left">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
      <span>Minhas Compras</span>
    </div>

    <div class="header-right">
      <a routerLink="/" class="btn-outline-white">
        Continuar Comprando
      </a>
    </div>
  </header>

  <main class="main-content">

    <div *ngIf="quantidade === 0" class="empty-msg">
      <p>Seu carrinho está vazio.</p>
      <a routerLink="/" class="btn-pink small">Voltar às compras</a>
    </div>

    <div *ngIf="quantidade > 0" class="cart-items">
      
      <div class="product-card">
        <div class="prod-info">
          <img [src]="imagemProduto" alt="Produto" class="prod-thumb">
          <h3>{{ nomeProduto }}</h3>
        </div>

        <div class="qty-control">
            <button type="button" (click)="diminuirQuantidade()">−</button>
            <input type="text" [value]="quantidade" readonly>
            <button type="button" (click)="aumentarQuantidade()">+</button>
        </div>

        <div class="prod-price">
          {{ precoUnitario | currency:'BRL' }}
        </div>

        <button type="button" class="btn-remove" (click)="removerProduto()" title="Remover item">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>
        </button>
      </div>

      <div class="row-between subtotal">
        <span>Subtotal (sem frete):</span>
        <strong>{{ subtotal | currency:'BRL' }}</strong>
      </div>

      <div class="shipping-area">
        <h4>CALCULE O FRETE</h4>
        <div class="shipping-form">
          <input type="text" class="input-pink" [(ngModel)]="cepInput" placeholder="Digite seu CEP" maxlength="9">
          <button type="button" class="btn-pink small" (click)="calcularFrete()">Calcular</button>
        </div>
        <a href="#" class="link-small">Não sei meu CEP</a>
        
        <p *ngIf="frete > 0" class="freight-result">
          Frete: {{ frete | currency:'BRL' }}
        </p>
      </div>

      <div class="checkout-section">
        <div class="row-between total-row">
          <span>Total:</span>
          <span class="big-price">{{ total | currency:'BRL' }}</span>
        </div>
        
        <p class="installments">
            Ou até 3x de {{ valorParcela | currency:'BRL' }} sem juros
        </p>
        
        <button type="button" class="btn-pink large" (click)="finalizarCompra()">
          Finalizar Compra
        </button>
        
        <a routerLink="/" class="link-more">Ver Mais Produtos</a>
      </div>

    </div>
  </main>

  <div class="overlay-sucesso" *ngIf="mostrarMensagemSucesso">
    <div class="card-sucesso">
      <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="#28a745" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
        <polyline points="22 4 12 14.01 9 11.01"></polyline>
      </svg>
      <h2>Oba! Compra Realizada!</h2>
      <p>Obrigado por comprar na Doll House.</p>
      <p class="aviso-redirect">Você será redirecionado em instantes...</p>
    </div>
  </div>

</div>