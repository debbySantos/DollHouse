<div class="container">
    <app-menu-lateral-adm></app-menu-lateral-adm>
    <main class="main-content">
        <header>
            <h1>Gerenciamento de Estoque</h1>
        </header>
        <div class="form-container-background">
            <div class="form-container">
                <h2>Cadastro de Boneca</h2>
                
                <form #formBoneca="ngForm" (ngSubmit)="submeter()" novalidate>
                    
                    <label for="id">Id</label>
                    <input type="text" id="id" placeholder="1" name="id" [(ngModel)]="boneca.id" readonly disabled> 

                    <label for="nome">Nome do item/Modelo</label>
                    <input type="text" id="nome" placeholder="Barbies Sereias" name="nome" [(ngModel)]="boneca.nome"
                           #nome="ngModel"
                           required 
                           minlength="3">
                    <div *ngIf="nome.invalid && (nome.dirty || nome.touched || formBoneca.submitted)" class="erro">
                      <span *ngIf="nome.errors?.['required']">Nome é obrigatório.</span>
                      <span *ngIf="nome.errors?.['minlength']">Nome precisa ter no mínimo 3 caracteres.</span>
                    </div>

                    <label for="categoria">Categoria</label>
                    <input type="text" id="categoria" placeholder="Kit Mini Coleção" name="categoria" [(ngModel)]="boneca.categoria"
                           #categoria="ngModel"
                           required>
                    <div *ngIf="categoria.invalid && (categoria.dirty || categoria.touched || formBoneca.submitted)" class="erro">
                      <span *ngIf="categoria.errors?.['required']">Categoria é obrigatória.</span>
                    </div>

                    <label for="preco">Preço</label>
                    <input type="number" id="preco" placeholder="R$ 60,00" name="preco" [(ngModel)]="boneca.preco"
                           #preco="ngModel"
                           required
                           [min]="0.01">
                    <div *ngIf="preco.invalid && (preco.dirty || preco.touched || formBoneca.submitted)" class="erro">
                      <span *ngIf="preco.errors?.['required']">Preço é obrigatório.</span>
                      <span *ngIf="preco.errors?.['min']">Preço deve ser maior que zero.</span>
                    </div>
                    
                    <label for="estoque">Em estoque</label>
                    <select id="estoque" name="estoque" [(ngModel)]="boneca.estoque"
                            #estoque="ngModel"
                            required>
                        <option [ngValue]="null" disabled>Selecione...</option>
                        <option [ngValue]="true">Disponível em estoque</option>
                        <option [ngValue]="false">Sem Estoque</option>
                    </select >
                    <div *ngIf="estoque.invalid && (estoque.dirty || estoque.touched || formBoneca.submitted)" class="erro">
                      <span *ngIf="estoque.errors?.['required']">Status de estoque é obrigatório.</span>
                    </div>
                    
                    <label for="quantidade">Quantidade</label>
                    <input type="number" id="quantidade" placeholder="100" name="quantidade" [(ngModel)]="boneca.quantidade"
                           #quantidade="ngModel"
                           required
                           [min]="0">
                    <div *ngIf="quantidade.invalid && (quantidade.dirty || quantidade.touched || formBoneca.submitted)" class="erro">
                      <span *ngIf="quantidade.errors?.['required']">Quantidade é obrigatória.</span>
                      <span *ngIf="quantidade.errors?.['min']">Quantidade não pode ser negativa.</span>
                    </div>
                    
                    <label for="status">Status</label>
                    <select id="status" name="status" [(ngModel)]="boneca.status"
                            #status="ngModel"
                            required>
                        <option [ngValue]="null" disabled>Selecione...</option>
                        <option value="Ativa">Ativa</option>
                        <option value="Fora de venda">Fora de venda</option>
                    </select>
                    <div *ngIf="status.invalid && (status.dirty || status.touched || formBoneca.submitted)" class="erro">
                      <span *ngIf="status.errors?.['required']">Status é obrigatório.</span>
                    </div>

                    <label for="imagem">Foto boneca</label>
                    <input type="file" id="imagem" name="img" (change)="onFileSelected($event)"/>
                    <input type="hidden" name="fotoValid" [(ngModel)]="boneca.foto" #fotoValid="ngModel" [required]="!bonecaId">
                    <img [src]="boneca.foto" *ngIf="boneca.foto" width="100" style="margin-top: 10px;">
                    <div *ngIf="fotoValid.invalid && (fotoValid.dirty || fotoValid.touched || formBoneca.submitted)" class="erro">
                      <span *ngIf="fotoValid.errors?.['required']">Foto é obrigatória para cadastrar.</span>
                    </div>
                    
                    <label for="descricao">Descrição</label>
                    <textarea id="descricao" placeholder="Sobre o produto..." name="descricao" [(ngModel)]="boneca.descricao"
                              #descricao="ngModel"
                              required
                              maxlength="200"></textarea>
                    <div *ngIf="descricao.invalid && (descricao.dirty || descricao.touched || formBoneca.submitted)" class="erro">
                      <span *ngIf="descricao.errors?.['required']">Descrição é obrigatória.</span>
                      <span *ngIf="descricao.errors?.['maxlength']">Descrição não pode passar de 200 caracteres.</span>
                    </div>

                    <button type="submit" [disabled]="formBoneca.invalid">
                      {{ bonecaId ? 'Atualizar Boneca' : 'Cadastrar Boneca' }}
                    </button>
                    
                </form>
            </div>
        </div>
    </main>
</div>